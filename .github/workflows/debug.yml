# .github/workflows/debug.yml
name: Check Changes

on:
  push:
  pull_request:

jobs:
  turbo-check:
    runs-on: ubuntu-latest
    steps:
      - uses: jwalton/gh-find-current-pr@master
        id: findPr

      - name: Debug PR info
        run: |
          echo "PR exists: ${{ steps.findPr.outputs.number != '' }}"
          echo "PR number: ${{ steps.findPr.outputs.number }}"

      - name: Check and exit if condition
        if: github.event_name == 'push' && steps.findPr.outputs.number != ''
        shell: bash
        run: |
          echo "Push event but commit is part of a Pull Request. Exiting..."
          exit 0

      - uses: actions/checkout@v4

      - uses: ./.github/actions/check-turbo-changes
        id: changes

      # Simple conditional steps
      - name: Build torus-wallet
        if: steps.changes.outputs.torus-wallet == 'true'
        run: echo "Building torus-wallet..."

      - name: Build torus-page
        if: steps.changes.outputs.torus-page == 'true'
        run: echo "Building torus-page... "

      # Debug output
      - name: Show changes
        run: |
          # Print all outputs
          echo "All changes:"
          echo '${{ toJSON(steps.changes.outputs) }}' | jq '.'
